<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FinFlow</title>
  <link rel="stylesheet" href="app.css" />
</head>

<body>

  <div id="welcomeOverlay" class="ff-welcome-overlay hidden">
    <div class="ff-welcome-panel">
      <div class="welcome-logo">
        <img 
          src="./images/logo.png" 
          alt="FinFlow Logo" 
          class="welcome-logo-img"
        />
      </div>
      <div class="ff-welcome-logo">FinFlow</div>
      <div class="ff-welcome-tagline">Jouw geld direct inzicht</div>
      <p class="ff-welcome-text ff-helptext">
        Laten we beginnen met jouw instellingen.
      </p>
      <button id="welcomeStartBtn" class="ff-btn ff-btn--primary">
        Aan de slag
      </button>
    </div>
  </div>

  <header>
    <h1>FinFlow ‚Ä¢ Jouw geld direct inzicht</h1>
  </header>
  
  <div id="devToggle" class="ff-btn ff-btn-secondary" class="dev-toggle">üõ†Ô∏è</div>

  <div id="devPanel" class="dev-panel" style="display:none;">
    <button id="devExportBtn">Export data</button>
    <button id="devImportBtn">Import data</button>
    <input type="file" id="importFileInput" accept="application/json" style="display:none;">
  </div>

  <div id="yearNavPill" class="nav-pill">
      <div class="nav-pill-inner">
        <div id="yearZonePrev" class="year-zone-left year-zone-clickable" aria-label="Vorig jaar">
          <span class="icon-btn">&lt;</span>
        </div>
        
        <div id="yearZoneSettings" class="year-center year-zone-clickable">
            <div class="year-and-settings-group"> 
                <span id="yearTitle" class="year-title-text">2025</span>
                <button id="yearSettingsBtn" class="icon-btn" aria-label="Jaarinstellingen">‚öô</button>
            </div>
        </div>
        
        <div id="yearZoneNext" class="year-zone-right year-zone-clickable" aria-label="Volgend jaar">
          <span class="icon-btn">&gt;</span>
        </div>
      </div>
  </div>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Maand</th>
          <th>Inkomen</th>
          <th>Uitgaven</th>
          <th class="saving-cell">Storting spaar</th>
          <th>Eindsaldo bank</th>
          <th>Eindsaldo spaar</th>
        </tr>
      </thead>
      <tbody id="yearTableBody"></tbody>
      <tfoot>
        <tr id="yearTotalRow"></tr> 
      </tfoot>
    </table>
  </div>


  <div id="setupOverlay" class="ff-popup-overlay ff-popup-overlay--wizard" style="display:none;">
    <div id="setupSheet" class="ff-popup ff-popup--wizard ff-popup--beginsaldo">
      <div class="ff-popup__header">
        <h2 id="setupTitle" class="ff-popup__title">Beginsaldo instellen</h2>
      </div>
      <div class="ff-popup__body">
        <label class="ff-field ff-field--full">
          <span class="ff-field__label">Beginsaldo bankrekening</span>
          <input
            id="setupBankInput"
            type="number"
            inputmode="decimal"
            step="0.01"
            min="0"
            class="ff-input ff-input--number ff-input--beginsaldo"
          />
        </label>
        <p class="ff-popup__hint">
          Voer je beginsaldo in. Laat leeg of klik Annuleren als dit 0 is.
        </p>
      </div>
      <div class="ff-popup__footer">
        <button type="button" id="setupCancelBtn" class="ff-btn ff-btn--secondary">Annuleren</button>
        <button type="button" id="setupSaveBtn" class="ff-btn ff-btn--primary">Opslaan</button>
      </div>
    </div>
  </div>

  <script type="module" src="scripts/core/state.js"></script>
  <script type="module" src="scripts/core/storage.js"></script>

  <script type="module" src="scripts/backup.js"></script>

  <script type="module" src="scripts/month/month.js"></script>

  <script type="module" src="scripts/categories/categories.js"></script>
  <script type="module" src="scripts/categories/premium.js"></script>

  <script type="module" src="scripts/ui/components/components.js"></script>
  <script type="module" src="scripts/ui/popups.js"></script>

  <script type="module" src="scripts/wizard/flow.js"></script>

  <script type="module" src="scripts/main.js"></script>

  <script>
    // Toggle zichtbaar/invisible maken
    document.getElementById("devToggle").onclick = () => {
      const p = document.getElementById("devPanel");
      p.style.display = p.style.display === "block" ? "none" : "block";
    };

    // Koppelingen met "echte" import/export knoppen
    (function() {
      const devPanel = document.getElementById("devPanel");
      const devExport = document.getElementById("devExportBtn");
      const devImport = document.getElementById("devImportBtn");
      const mainExport = document.getElementById("exportDataBtn");
      const mainImport = document.getElementById("importDataBtn");

      if (devExport && mainExport) {
        devExport.onclick = () => {
          mainExport.click();
          devPanel.style.display = "none";
        };
      }

      if (devImport && mainImport) {
        devImport.onclick = () => {
          mainImport.click();
          devPanel.style.display = "none";
        };
      }
    })();
  </script>

</body>
</html>